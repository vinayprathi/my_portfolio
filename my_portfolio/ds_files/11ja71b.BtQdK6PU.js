import"./bygoogle.COHPXIFU.js";import{r as y,N as L,E as b,q as A,x as v,c as z,b as I,s as q}from"./index.DMv_spmT.js";import{o as R}from"./share-url.2qQdjiX6.js";import{p as B,h as m}from"./hue.CO6bY_7Y.js";import{a2 as W}from"./reactivity.esm-bundler.Dgu2nxmG.js";import"./prf-down.CptnNU0B.js";import"./video.BckSihol.js";import"./nav.B407MHZ2.js";import"./11ja71b.CwzFJX-S.js";import"./client.DbfGZg7x.js";import"./11ja71b.BZ-mcCzL.js";import"./searchbar.BKvNjSl6.js";import"./client.CSkNmkjY.js";import"./howto.C4nRRdsB.js";import"./client.BHgMVYWW.js";import"./usePosition.C0VamIcC.js";import"./index.BGsV3d-P.js";import"./scroll.C0UMxIqh.js";import"./core.DrBoM3qP.js";function E(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}E.g=e}function F(e,i){if(!e)return;const t=document.getElementById(i)||document.createElement("iframe");t.id=i,t.src=e,document.body.appendChild(t)}function P(){if(!__DATA__.isBot){const{id:e,type:i}=s;y.get("/api/statistics/view",{id:e,type:i}),i=="1"?y.get("/api/statistics/detail-out-view",{id:e}):i=="5"&&B("font_detail",1,"come")}}const s=window._getDetailData(),C=W({spin:!1}),w=()=>{C.spin=!1},x=e=>{w(),e&&window.open(e,"_blank")},H=()=>{A("rbg_id_type","".concat(s.id,"_").concat(s.type),{domain:".pngtree.com",expires:1}),x("/remove-background")},j={png:"down-btnfreepng",rar:"down-btnfreerar",ppt:"down-btnfreerar",premium:"down-btnvippng",edit:"down-btnedit",freevideo:"down-btnfreevideo"};function N(e,i,t){if(!e||C.spin)return;const n=s.one>0||s.limitedTime,o=()=>{if(__DATA__.enterpriseStatus==1)return;const a=+s.vipType;if(!n&&a>0){const f=__DATA__.vipType<=0;if(f||!f&&a==2)return w(),$app.dialog="upgrade-premium",!0}};if(!$app.checkIsLogin()){m("down-btnnologin-"+e);return}if(e==="remove-bg"){o()||(m("detail/ai-btn-remove-bg"),H());return}switch(C.spin=!0,m(j[e]),e){case"png":case"rar":case"ppt":case"twibbon":const a=e==="png";i&&n?x(i):b.emit("_amemn8","*",{onend:w,type:s.type,btnType:e,licenseType:s.vipType||0,href:i,downUrl:i,rarName:t||"PSD",fee:s.fee&&a});break;case"edit":i&&s.editips&&confirm(s.editips)&&(i=i.replace(/\/canvas\/?\?/,"/canvas/designer.html?")),o()||x(i);break;case"freevideo":F(i,"down_ifr"),w();break;default:e==="premium"&&__DATA__.cookieLang!=="cht"?b.emit("_amemn8","plans",{onend:w,type:s.type}):x(i);break}}let D=!1;function O(e,i){if(!i||D)return;if(!$app.checkIsLogin()){m("downsizes-nologin-"+e);return}if(document.querySelector("._1rtuhfs")){$app.dialog="device-limit";return}const t=p=>{b.emit("_amemn8",p,{fee:p==="rar"?!0:void 0,onend:w,type:s.type}),m("downsizes-limit-"+e)},{vipType:n,down_count:o,enterpriseStatus:a,cookieLang:f,has_down:r}=__DATA__,{vipType:l}=s,h=o<=0,c=n==0;if(l==2&&a!=1){t("enterprise");return}if(c){t(f==="cht"?"rar":"plans");return}if([1,6,9].includes(+n)&&h){t("daily");return}if(r>200){t("max");return}const u=($toast==null?void 0:$toast.loading("Loading..."))||L,g=p=>{D=p,!p&&u()};g(!0);const d=p=>{p&&(g(!1),setTimeout(()=>{location.href=i+"&task_id="+p},100))};y.post("/api/ai-tools/img-enlarge",{id:s.id,multiple:e}).then(p=>{if(p.status==201)d(p.data.task_id);else if(p.status==200){const{task_id:S,md5:T}=p.data;k(S,T,0)}else $toast==null||$toast.error(p.info||"Error!"),g(!1)}).catch(()=>{g(!1),$toast==null||$toast.error("Error!")});function k(p,S,T){!p||T>=50||y.post("/api/ai-tools/img-enlarge-task",{id:s.id,task_id:p,md5:S,multiple:e}).then($=>{$.status==200?d($.data.task_id||p):setTimeout(()=>{k(p,S,++T)},5e3)}).catch(()=>{})}}v("_19z0z4b",()=>{const e={type:"",desc:""};return{loading:!1,err:"",form:{...e},errCls(i){return this.err===i?"_feqbc0":""},onSubmit(){if(this.loading)return;const i={...this.form},t=n=>{if(i[n].trim()==="")return this.err=n,!0};t("type")||t("desc")||(this.err="",this.loading=!0,y.post("/api/message/complaint",{complaint_type:i.type,content:i.desc,element_id:s.id,element_type:s.type}).then(n=>{this.loading=!1,n.rsp==200?($toast==null||$toast.success("Successful!"),this.$nextTick(()=>{$app.onDialog(""),setTimeout(()=>{this.form={...e}},300)})):$toast==null||$toast.error(n.info)}).catch(()=>{this.loading=!1,$toast==null||$toast.error("Error!")}))}}});v("_1r0qupz",e=>({tab:e.tab,prfLoading:!1,tabCls(i){return this.tab===i?"_c5516n":""},onTab(i){this.tab=i},licPrf(i){const t=this.$app;if(!t.tapLogin())return;const n=i==="enterprise",o=n?"team":"",a=s.one>0,{vipType:f,enterpriseStatus:r}=__DATA__,l=n?r!=1:f<=0;if(!a&&l)t.onDialog(n?"_5j84hy":"_1mbqn4s"),m("prfview-btn"+o);else if(!this.prfLoading){this.prfLoading=!0;const h=this._Refs.prfDown,c=()=>{this.prfLoading=!1};h.onshow({...h.getName(s.one,i),slidesdocs:!!s.slidesdocs,data:{action:"detail",id:s.id,type:s.type},resolve:c,reject:c}),m("prfdown-btn"+o)}}}));v("_1um5rr9",e=>({url:e.url,followed:e.is,loading:!1,onFollow(){const i=this.$app;!this.loading&&i.tapLogin()&&(this.loading=!0,y.post("/api/async/designer-follow",{id:e.uid}).then(t=>{this.loading=!1,t.status===200&&(this.followed=!this.followed)}).catch(()=>{this.loading=!1}))}}));v("_166ljwa",e=>{const i="_sstrbf";return{store:C,previewSpin:!1,videoSize:"",wordsExpand:e.is2xl,wordsCount:"+10",wordsFromCls:e.is2xl?"":i,showDownSizes:!1,get showVideoDown(){return this.videoSize==="down"},"on:mounted"(){const t=this._Refs.hangs;t&&t.setIds(s.id,s.type),this.wordsCalc(!0),P()},wordsMinHeight(t){t.style.height="38px",t.style.overflow="hidden"},wordsOnExpand(){if(this.wordsFromCls=i,this.wordsExpand=!this.wordsExpand,this.wordsExpand){const t=this.$refs.wordsbtn,n=t&&t.parentElement;if(!n)return;n.appendChild(t)}else setTimeout(()=>{this.wordsCalc()},200)},wordsCalc(t){if(window.innerWidth<1024)return;const n=this.$refs.wordsbtn,o=n&&n.parentElement;if(!o)return;const a=()=>{n.classList.remove("_1i3kt2s")};if(t&&e.is2xl){a();return}const f=o.children,r=f.length,l=f[r-1];if(r<=1||l&&l.offsetTop<=0)return;const h=(c,u)=>{if(this.wordsCount="+"+(r-1-u),o.insertBefore(n,c),n.offsetTop>0){const g="previousElementSibling";let d=n[g];for(;d&&d.offsetTop>0;)d=d[g];d&&h(d,u-1)}else o._btn=c,o._btni=u;a()};if(o._btn){h(o._btn,o._btni);return}for(let c=0;c<r;c++){const u=f[c];if(u.offsetTop>0){h(u,c);break}}},onDownld(t,n,o){N(t,n,o)},onDownSizes(t){this.showDownSizes=t!=null?t:!this.showDownSizes},sizesDownld(t){O(t,this.$refs.downld_png._xprops.u)},mDownld(){q(40,{target:document.querySelector("._bvrn6v")})},onCopy(){},onPreview(t=!1){if(t){const l=this.$element.querySelector("._bvrn6v .downld-btn-edit");if(l){I.dispatch(l,"click");return}}if(this.previewSpin)return;const n=this.$refs.imgLink,o=this.$refs.image;if(!n||!o)return;const a=n.href||o.currentSrc||o.src;if(!a)return;const f=()=>{b.emit("_kuxk9d",{src:a,width:n._nw,height:n._nh}),this.previewSpin=!1};if(this.previewSpin=!0,setTimeout(()=>{m("detail-preview-image")},80),n._nw){f();return}const r=new Image;r.onload=()=>{n._nw=r.naturalWidth,n._nh=r.naturalHeight,f()},r.onabort=r.onerror=()=>{this.previewSpin=!1,$toast==null||$toast.error("Load failed!")},r.decoding="async",r.src=a},likeSpin(){const t=this._Refs.hangs;return t?t.likeSpin({id:s.id,type:s.type}):""},likeCls(){const t=this._Refs.hangs;return t?t.likeIcoCls({id:s.id,type:s.type}):""},onLike(){const t=this._Refs.hangs;t&&t.onLike(s.id,s.type)},urlCopying:!1,onShareUrl(){z(location.href).then(()=>(this.urlCopying=!0,this.$nextTick())).then(()=>{setTimeout(()=>{this.urlCopying=!1},2800)})},onShare(t){const n=this.$refs.image,o=n?n.currentSrc||n.src:M(s.shareimg);R({name:t,media:o,title:s.sharetit,word:s.shareword})},how2Attri(){const t=this._Refs.howToAttribute,n=this.$refs.lionName;t.onopen({type:s.type,url:location.pathname,usrName:n&&n.textContent||""})}}});function M(e){return/^https?:\/\//.test(e)?e:"https://png.pngtree.com"+e}const G=e=>e*(96/72);v("_e05maq",e=>({text:"",pt:e.pt,effectId:e.eid,loading:!1,get textCls(){return"effects-text"+this.effectId},get textStyl(){return"--font-size:".concat(G(this.pt),"px")},get fontText(){return this.text||e.p},ptCls(i){return this.pt===i?"_4x0icu":"_1t7gxnv"},ptClick(i){this.pt=i},effectCls(i){return this.effectId===i?"_1abob5y":"_oqy7bn"},effectClick(i){this.effectId=i},"on:mounted"(){V(),this.initCanvas()},initCanvas(){},downPng(){if(this.loading)return;if(this.$app.tapLogin()){const t=this.fontText.trim();if(!t)return;this.loading=!0;const n=()=>{this.loading=!1},o=this.$refs.spanTxt,a=o&&o.parentElement;if(!a)return;const f=this.$refs.canvas,r=getComputedStyle(o);b.emit("_h3jjzr",{styles:{left:o.offsetLeft,top:o.offsetTop+1.25,fontFamily:r.fontFamily,fontSize:parseInt(r.fontSize),fontWeight:r.fontWeight,fontStyle:r.fontStyle},effectId:this.effectId,text:t,textWidth:o.offsetWidth,canvasWidth:a.offsetWidth,canvasHeight:a.offsetHeight,cid:f.id,onok:n,onerr(){n(),$toast==null||$toast.error("Error!")}})}}}));function V(){const e=document.querySelector("style[data-font-style]");if(e&&e.sheet){const i=e.sheet.cssRules,t=i.length;for(let n=0;n<t;n++)Z(i[n].cssText);e.parentElement.removeChild(e)}}let _;function Z(e){_||(_=document.createElement("style"),document.head.appendChild(_),_.appendChild(document.createTextNode(""))),_.sheet&&_.sheet.insertRule(e,_.sheet.cssRules.length)}export{E as __vite_legacy_guard};
